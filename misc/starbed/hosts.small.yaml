all:
  vars:
    http_proxy: '{{ lookup("env", "HTTP_PROXY") }}'
    https_proxy: '{{ lookup("env", "HTTPS_PROXY") }}'
    ansible_ssh_user: '{{ lookup("env", "ANSIBLE_SSH_USER") }}'
    ansible_ssh_pass: '{{ lookup("env", "ANSIBLE_SSH_PASS") }}'
    ansible_sudo_pass: '{{ lookup("env", "ANSIBLE_SUDO_PASS") }}'
    ansible_ssh_common_args: >-
      -o StrictHostKeyChecking=no
      -o UserKnownHostsFile=/dev/null

    routes:
    - network: net1
      destination: 0.0.0.0/0
      nexthop:
        segs:
        - fc00:ff00::0

    benchmark:
      title: "test"
      time_seconds: 10
      report_interval_seconds: 1
      message_size_bytes: 1000
      bandwidth: 10M
      #bandwidth: 1000M
      num_concurrent_session: 100

    containers:
    # x082: client
    - name: c11
      host: x082
      ports:
      - type: overlay
        addrs: [{addr: 10.1.0.1}]
        network: net1
      benchmark:
        role: client
        dst: 142.1.0.1
    - name: c12
      host: x082
      ports:
      - type: overlay
        addrs: [{addr: 10.1.0.2}]
        network: net1
      benchmark:
        role: client
        dst: 142.1.0.2
    - name: c21
      host: x082
      ports:
      - type: overlay
        addrs: [{addr: 10.2.0.1}]
        network: net2
    - name: c22
      host: x082
      ports:
      - type: overlay
        addrs: [{addr: 10.2.0.2}]
        network: net2
    - name: s1
      host: x082
      ports:
      - type: underlay
        addrs: [{addr: 142.1.0.1}]
      httpApp: true
      benchmark:
        role: server
    - name: s2
      host: x082
      ports:
      - type: underlay
        addrs: [{addr: 142.1.0.2}]
      httpApp: true
      benchmark:
        role: server

    # x083: server
    - name: c13
      host: x083
      ports:
      - type: overlay
        addrs: [{addr: 10.1.0.3}]
        network: net1
      benchmark:
        role: client
        dst: 142.1.0.3
    - name: c14
      host: x083
      ports:
      - type: overlay
        addrs: [{addr: 10.1.0.4}]
        network: net1
      benchmark:
        role: client
        dst: 142.1.0.4
    - name: c23
      host: x083
      ports:
      - type: overlay
        addrs: [{addr: 10.2.0.3}]
        network: net2
    - name: c24
      host: x083
      ports:
      - type: overlay
        addrs: [{addr: 10.2.0.4}]
        network: net2
    - name: s3
      host: x083
      ports:
      - type: underlay
        addrs: [{addr: 142.1.0.3}]
      httpApp: true
      benchmark:
        role: server
    - name: s4
      host: x083
      ports:
      - type: underlay
        addrs: [{addr: 142.1.0.4}]
      httpApp: true
      benchmark:
        role: server

    # x084,x085,0x086: l-node
    - name: l1
      host: x084
      ports:
      - type: underlay
        addrs: []
        bgp: {}
    # - name: l4
    #   host: x084
    #   ports:
    #   - type: underlay
    #     addrs: []
    #     bgp: {}
    # - name: l7
    #   host: x084
    #   ports:
    #   - type: underlay
    #     addrs: []
    #     bgp: {}
    - name: l2
      host: x085
      ports:
      - type: underlay
        addrs: []
        bgp: {}
    # - name: l5
    #   host: x085
    #   ports:
    #   - type: underlay
    #     addrs: []
    #     bgp: {}
    # - name: l8
    #   host: x085
    #   ports:
    #   - type: underlay
    #     addrs: []
    #     bgp: {}
    - name: l3
      host: x086
      ports:
      - type: underlay
        addrs: []
        bgp: {}
    # - name: l6
    #   host: x086
    #   ports:
    #   - type: underlay
    #     addrs: []
    #     bgp: {}
    # - name: l9
    #   host: x086
    #   ports:
    #   - type: underlay
    #     addrs: []
    #     bgp: {}

    # x087,x088,x089: l-node
    - name: n1
      host: x087
      ports:
      - type: underlay
        addrs: []
        bgp: {}
    # - name: n4
    #   host: x087
    #   ports:
    #   - type: underlay
    #     addrs: []
    #     bgp: {}
    # - name: n7
    #   host: x087
    #   ports:
    #   - type: underlay
    #     addrs: []
    #     bgp: {}
    - name: n2
      host: x088
      ports:
      - type: underlay
        addrs: []
        bgp: {}
    # - name: n5
    #   host: x088
    #   ports:
    #   - type: underlay
    #     addrs: []
    #     bgp: {}
    # - name: n8
    #   host: x088
    #   ports:
    #   - type: underlay
    #     addrs: []
    #     bgp: {}
    - name: n3
      host: x089
      ports:
      - type: underlay
        addrs: []
        bgp: {}
    # - name: n6
    #   host: x089
    #   ports:
    #   - type: underlay
    #     addrs: []
    #     bgp: {}
    # - name: n9
    #   host: x089
    #   ports:
    #   - type: underlay
    #     addrs: []
    #     bgp: {}

#NOTE(slankdev): starbed assignment
#w[001:013]:
#w[014:048]:
#w[101:112]:
#w[117:126]:
#x[065:094]:

starbedNode:
  children:
    routeServer:
    dplaneNode:

routeServer:
  hosts:
    x081:
      kernelVersion: 5.15.0-82
      asNumber: 4200000001
      routerId: 10.255.0.1
      vrfs:
      - name: vrf-control1
        dataplaneInterfaces:
        - name: eno12399
          addrs:
          - {addr: 2001:ff01::1, plen: 64}
          - {addr: 10.255.1.1, plen: 24}
      - name: vrf-control2
        dataplaneInterfaces:
        - name: eno12409
          addrs:
          - {addr: 2001:ff02::1, plen: 64}
          - {addr: 10.255.2.1, plen: 24}
      - name: vrf-control3
        dataplaneInterfaces:
        - name: ens2f0
          addrs:
          - {addr: 2001:ff03::1, plen: 64}
          - {addr: 10.255.3.1, plen: 24}
      - name: vrf-control4
        dataplaneInterfaces:
        - name: ens2f1
          addrs:
          - {addr: 2001:ff04::1, plen: 64}
          - {addr: 10.255.4.1, plen: 24}

dplaneNode:
  hosts:
    x082:
      kernelVersion: 5.15.0-82
      asNumber: 4200000001
      routerId: 10.255.0.2
      srv6_locators:
      - prefix: 2001:a003::/32
        token: '2001:a003'
      dataplaneInterfaces:
      - name: eno12399
        vrf: vrf-control1
        addrs:
        - {addr: 2001:ff01::2, plen: 64}
        - {addr: 10.255.1.2, plen: 24}
      - name: eno12409
        vrf: vrf-control2
        addrs:
        - {addr: 2001:ff02::2, plen: 64}
        - {addr: 10.255.2.2, plen: 24}
      - name: ens2f0
        vrf: vrf-control3
        addrs:
        - {addr: 2001:ff03::2, plen: 64}
        - {addr: 10.255.3.2, plen: 24}
      - name: ens2f1
        vrf: vrf-control4
        addrs:
        - {addr: 2001:ff04::2, plen: 64}
        - {addr: 10.255.4.2, plen: 24}

    x083:
      kernelVersion: 5.15.0-82
      asNumber: 4200000001
      routerId: 10.255.0.3
      srv6_locators:
      - prefix: 2001:a004::/32
        token: '2001:a004'
      dataplaneInterfaces:
      - name: eno12399
        vrf: vrf-control1
        addrs:
        - {addr: 2001:ff01::3, plen: 64}
        - {addr: 10.255.1.3, plen: 24}
      - name: eno12409
        vrf: vrf-control2
        addrs:
        - {addr: 2001:ff02::3, plen: 64}
        - {addr: 10.255.2.3, plen: 24}
      - name: ens2f0
        vrf: vrf-control3
        addrs:
        - {addr: 2001:ff03::3, plen: 64}
        - {addr: 10.255.3.3, plen: 24}
      - name: ens2f1
        vrf: vrf-control4
        addrs:
        - {addr: 2001:ff04::3, plen: 64}
        - {addr: 10.255.4.3, plen: 24}

    x084:
      kernelVersion: 5.15.0-82
      asNumber: 4200000001
      routerId: 10.255.0.4
      srv6_locators:
      - prefix: 2001:a004::/32
        token: '2001:a004'
      dataplaneInterfaces:
      - name: eno12399
        vrf: vrf-control1
        addrs:
        - {addr: 2001:ff01::4, plen: 64}
        - {addr: 10.255.1.4, plen: 24}
      - name: eno12409
        vrf: vrf-control2
        addrs:
        - {addr: 2001:ff02::4, plen: 64}
        - {addr: 10.255.2.4, plen: 24}
      - name: ens2f0
        vrf: vrf-control3
        addrs:
        - {addr: 2001:ff03::4, plen: 64}
        - {addr: 10.255.3.4, plen: 24}
      - name: ens2f1
        vrf: vrf-control4
        addrs:
        - {addr: 2001:ff04::4, plen: 64}
        - {addr: 10.255.4.4, plen: 24}

    x085:
      kernelVersion: 5.15.0-82
      asNumber: 4200000001
      routerId: 10.255.0.5
      srv6_locators:
      - prefix: 2001:a005::/32
        token: '2001:a005'
      dataplaneInterfaces:
      - name: eno12399
        vrf: vrf-control1
        addrs:
        - {addr: 2001:ff01::5, plen: 64}
        - {addr: 10.255.1.5, plen: 24}
      - name: eno12409
        vrf: vrf-control2
        addrs:
        - {addr: 2001:ff02::5, plen: 64}
        - {addr: 10.255.2.5, plen: 24}
      - name: ens2f0
        vrf: vrf-control3
        addrs:
        - {addr: 2001:ff03::5, plen: 64}
        - {addr: 10.255.3.5, plen: 24}
      - name: ens2f1
        vrf: vrf-control4
        addrs:
        - {addr: 2001:ff04::5, plen: 64}
        - {addr: 10.255.4.5, plen: 24}

    x086:
      kernelVersion: 5.15.0-82
      asNumber: 4200000001
      routerId: 10.255.0.6
      srv6_locators:
      - prefix: 2001:a006::/32
        token: '2001:a006'
      dataplaneInterfaces:
      - name: eno12399
        vrf: vrf-control1
        addrs:
        - {addr: 2001:ff01::6, plen: 64}
        - {addr: 10.255.1.6, plen: 24}
      - name: eno12409
        vrf: vrf-control2
        addrs:
        - {addr: 2001:ff02::6, plen: 64}
        - {addr: 10.255.2.6, plen: 24}
      - name: ens2f0
        vrf: vrf-control3
        addrs:
        - {addr: 2001:ff03::6, plen: 64}
        - {addr: 10.255.3.6, plen: 24}
      - name: ens2f1
        vrf: vrf-control4
        addrs:
        - {addr: 2001:ff04::6, plen: 64}
        - {addr: 10.255.4.6, plen: 24}

    x087:
      kernelVersion: 5.15.0-82
      asNumber: 4200000001
      routerId: 10.255.0.7
      srv6_locators:
      - prefix: 2001:a007::/32
        token: '2001:a007'
      dataplaneInterfaces:
      - name: eno12399
        vrf: vrf-control1
        addrs:
        - {addr: 2001:ff01::7, plen: 64}
        - {addr: 10.255.1.7, plen: 24}
      - name: eno12409
        vrf: vrf-control2
        addrs:
        - {addr: 2001:ff02::7, plen: 64}
        - {addr: 10.255.2.7, plen: 24}
      - name: ens2f0
        vrf: vrf-control3
        addrs:
        - {addr: 2001:ff03::7, plen: 64}
        - {addr: 10.255.3.7, plen: 24}
      - name: ens2f1
        vrf: vrf-control4
        addrs:
        - {addr: 2001:ff04::7, plen: 64}
        - {addr: 10.255.4.7, plen: 24}

    x088:
      kernelVersion: 5.15.0-82
      asNumber: 4200000001
      routerId: 10.255.0.8
      srv6_locators:
      - prefix: 2001:a008::/32
        token: '2001:a008'
      dataplaneInterfaces:
      - name: eno12399
        vrf: vrf-control1
        addrs:
        - {addr: 2001:ff01::8, plen: 64}
        - {addr: 10.255.1.8, plen: 24}
      - name: eno12409
        vrf: vrf-control2
        addrs:
        - {addr: 2001:ff02::8, plen: 64}
        - {addr: 10.255.2.8, plen: 24}
      - name: ens2f0
        vrf: vrf-control3
        addrs:
        - {addr: 2001:ff03::8, plen: 64}
        - {addr: 10.255.3.8, plen: 24}
      - name: ens2f1
        vrf: vrf-control4
        addrs:
        - {addr: 2001:ff04::8, plen: 64}
        - {addr: 10.255.4.8, plen: 24}

    x089:
      kernelVersion: 5.15.0-82
      asNumber: 4200000001
      routerId: 10.255.0.9
      srv6_locators:
      - prefix: 2001:a009::/32
        token: '2001:a009'
      dataplaneInterfaces:
      - name: eno12399
        vrf: vrf-control1
        addrs:
        - {addr: 2001:ff01::9, plen: 64}
        - {addr: 10.255.1.9, plen: 24}
      - name: eno12409
        vrf: vrf-control2
        addrs:
        - {addr: 2001:ff02::9, plen: 64}
        - {addr: 10.255.2.9, plen: 24}
      - name: ens2f0
        vrf: vrf-control3
        addrs:
        - {addr: 2001:ff03::9, plen: 64}
        - {addr: 10.255.3.9, plen: 24}
      - name: ens2f1
        vrf: vrf-control4
        addrs:
        - {addr: 2001:ff04::9, plen: 64}
        - {addr: 10.255.4.9, plen: 24}
